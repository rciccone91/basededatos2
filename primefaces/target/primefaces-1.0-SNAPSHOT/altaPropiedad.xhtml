<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions" 
	template="/templates/template.xhtml">
	<ui:define name="content">
	<script src="http://maps.google.com/maps/api/js" type="text/javascript"></script>
	<h:outputScript library="js" name="common.js"/>
    <f:metadata>
        <f:viewParam id="ciudad" name="ciudad" value="#{altaPropiedadBean.direccionBuscada}"/>
    </f:metadata>
	<h1 align="center">Alta de propiedades</h1>
			<div class="ui-grid ui-grid-responsive">
			<div class="ui-grid-row">
				<div class="ui-grid-col-4">
				<p:outputLabel value="Direcci칩n:"/><p:inputText id="direccion" required="true"
				value="#{altaPropiedadBean.direccion}" maxlength="60"></p:inputText> 
				</div>
				<div class="ui-grid-col-1">
				<p:outputLabel id="ciudadLabl" value="Ciudad:"/>
				</div>
				<div class="ui-grid-col-2">
				<p:selectOneMenu id="ciudad"  onstyle="width:125px" value="#{altaPropiedadBean.ciudad}" required="true" 
				converter="ciudadConverter">
            	<!-- MOCKED -->
            	<f:selectItem itemLabel="Seleccionar.." />
            	<f:selectItems value="#{altaPropiedadBean.ciudades}" var="c" itemLabel="#{c.ciudad}" itemValue="#{c}"/>
            	<p:ajax update="nombreCiudad" event="change"></p:ajax>
            	</p:selectOneMenu>
				</div>
				<div class="ui-grid-col-4">
				<p:commandButton value ="Buscar" onclick="geocode()" type="button"/>
				</div>
				</div>
			</div>
			<p:panelGrid>	
        	<br/><br/> <h:inputHidden id="nombreCiudad" value="#{altaPropiedadBean.nombreCiudad}"></h:inputHidden>
        	<h:inputHidden id="latitud" value="#{altaPropiedadBean.latitud}"></h:inputHidden>
        	<h:inputHidden id="longitud" value="#{altaPropiedadBean.longitud}"></h:inputHidden>
        	<p:accordionPanel activeIndex="null">
        	<p:tab title="Mapa">
        	<p:gmap id="geoGmap" widgetVar="geoGmap" streetView="true" 
					center="#{altaPropiedadBean.centerGeoMap}" zoom="#{altaPropiedadBean.zoom}"  type="HYBRID" 
					model="#{altaPropiedadBean.geoModel}" style="width:700px;height:400px">
					<p:ajax event="geocode" listener="#{altaPropiedadBean.onGeocode}"
						update="@this" />
				</p:gmap>
			</p:tab>
			</p:accordionPanel><br/><br/>
			<p:outputLabel value="Tipo de propiedad:"/> 
			<p:selectOneMenu id="propiedad" style="width:125px" required="true" value="#{altaPropiedadBean.tipoDePropiedad}" converter="tipoDePropiedadConverter">
            	<!-- MOCKED -->
            	<!--<f:selectItem itemLabel="Select One" itemValue="" />-->
            	<f:selectItems value="#{altaPropiedadBean.tiposDePropiedad}" var="tipoDeProp" itemLabel="#{tipoDeProp.descripcion}" itemValue="#{tipoDeProp}" />
        	</p:selectOneMenu><br/><br/>
			<br/><br/>
			<p:outputLabel value="Descripci칩n"/><br/><br/><p:inputTextarea required="true" id="desc" rows="10" 
				cols="40" value="#{altaPropiedadBean.desc}" maxlength="500"/><br/><br/>
			<p:outputLabel value="Ambientes:"/><pe:inputNumber id="amb" value="#{altaPropiedadBean.ambientes}" required="true"/><br/><br/>
			<p:outputLabel value="Ba침os: "/> <pe:inputNumber id="banios" value="#{altaPropiedadBean.banios}" required="true"></pe:inputNumber><br/><br/>
			<p:outputLabel value="Activa: "/>
        	<p:selectOneRadio id="activa" value="#{altaPropiedadBean.activo}" required="true">
            	<f:selectItem itemLabel="Si" itemValue="true" />
            	<f:selectItem itemLabel="No" itemValue="false" />
        	</p:selectOneRadio><br/><br/>
			<p:outputLabel value="Superficie Cubierta(m2): "/> <pe:inputNumber id="supm2" value="#{altaPropiedadBean.superficieCubierta}" required="true"></pe:inputNumber><br/><br/>
			<p:outputLabel value="Superficie Total(m2): "/> <pe:inputNumber id="suptotal" value="#{altaPropiedadBean.superficieTotal}" required="true"></pe:inputNumber><br/><br/>
			<p:outputLabel value="Habitaciones: "/> <pe:inputNumber id="hab" value="#{altaPropiedadBean.habitaciones}" required="true"></pe:inputNumber><br/><br/>
			
			<p:outputLabel value="Operaci칩n: "/>
			<p:selectOneMenu id="operacion" style="width:125px" value="#{altaPropiedadBean.tipoDeOperacion}" converter="tipoDeOperacionConverter" required="true">
            	<!-- MOCKED -->
            	<!--<f:selectItem itemLabel="Select One" itemValue="" />-->
            <f:selectItems value="#{altaPropiedadBean.tiposDeOperacion}" var="tipoDeOp" itemLabel="#{tipoDeOp.descripcion}" itemValue="#{tipoDeOp}" />
        	</p:selectOneMenu><br/><br/>
        	<p:outputLabel value="Fecha de Construccion "/> <p:calendar id="fechaDeConstruccion"  maxdate="#{altaPropiedadBean.max}" navigator="true" value="#{altaPropiedadBean.fechaDeConstruccion}" required="true"></p:calendar>   <br/><br/>
        	<p:outputLabel value="Precio: "/> <pe:inputNumber id="precio" value="#{altaPropiedadBean.precio}" required="true"></pe:inputNumber><br/><br/>
            <p:commandButton value="Guardar" icon="ui-icon-check" action="#{altaPropiedadBean.doSave}"></p:commandButton>
		</p:panelGrid>
	</ui:define>
</ui:composition>
